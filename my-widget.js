/*! For license information please see my-widget.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("ReactDOM"),require("React")):"function"==typeof define&&define.amd?define(["ReactDOM","React"],t):"object"==typeof exports?exports.MyWidget=t(require("ReactDOM"),require("React")):e.MyWidget=t(e.ReactDOM,e.React)}(this,(function(e,t){return function(){var r,n,o={35:function(e,t,r){const n=r(24),o=n.forwardRef((function({title:e,titleId:t,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"}))}));e.exports=o},497:function(e,t,r){const n=r(24),o=n.forwardRef((function({title:e,titleId:t,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}));e.exports=o},992:function(e,t,r){const n=r(24),o=n.forwardRef((function({title:e,titleId:t,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}));e.exports=o},781:function(e,t,r){const n=r(24),o=n.forwardRef((function({title:e,titleId:t,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"}))}));e.exports=o},228:function(e,t,r){const n=r(24),o=n.forwardRef((function({title:e,titleId:t,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M9.293 2.293a1 1 0 011.414 0l7 7A1 1 0 0117 11h-1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3a1 1 0 00-1-1H9a1 1 0 00-1 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-6H3a1 1 0 01-.707-1.707l7-7z",clipRule:"evenodd"}))}));e.exports=o},98:function(e,t){var r="undefined"!=typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(r.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!=typeof e&&(e=String(e)),e}function a(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function h(e){var t=new FileReader,r=u(t);return t.readAsArrayBuffer(e),r}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=d(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var e,t,r,n=l(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=u(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(e,t){e=i(e),t=s(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},c.prototype.delete=function(e){delete this.map[i(e)]},c.prototype.get=function(e){return e=i(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},c.prototype.set=function(e,t){this.map[i(e)]=s(t)},c.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},c.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),a(e)},c.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),a(e)},c.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),a(e)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var r,n,o=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),p.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function v(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function m(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},f.call(y.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var g=[301,302,303,307,308];m.redirect=function(e,t){if(-1===g.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function b(e,n){return new Promise((function(o,i){var s=new y(e,n);if(s.signal&&s.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function l(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new c,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;o(new m(n,r))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&r.blob&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",l),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",l)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}b.polyfill=!0,e.fetch||(e.fetch=b,e.Headers=c,e.Request=y,e.Response=m),t.Headers=c,t.Request=y,t.Response=m,t.fetch=b,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=n;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t},284:function(e){var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},840:function(e,t,r){var n;if("object"==typeof globalThis)n=globalThis;else try{n=r(284)}catch(e){}finally{if(n||"undefined"==typeof window||(n=window),!n)throw new Error("Could not determine global this")}var o=n.WebSocket||n.MozWebSocket,i=r(387);function s(e,t){return t?new o(e,t):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(s,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?s:null,version:i}},387:function(e,t,r){e.exports=r(794).version},24:function(e){"use strict";e.exports=t},314:function(t){"use strict";t.exports=e},794:function(e){"use strict";e.exports={version:"1.0.34"}}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return o[e].call(r.exports,r,r.exports,s),r.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},s.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var o=Object.create(null);s.r(o);var i={};r=r||[null,n({}),n([]),n(n)];for(var a=2&t&&e;"object"==typeof a&&!~r.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((function(t){i[t]=function(){return e[t]}}));return i.default=function(){return e},s.d(o,i),o},s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return function(){"use strict";s.r(a),s.d(a,{default:function(){return rn}});var e=s(314),t=s.n(e),r=s(24),n=s.n(r),o=s(228),i=s(992),c=function(e){for(var t=e.breadcrumbsContext,r=t.homehref,n=t.names,s=t.hrefs,a=[],c=0;c<n.length;c++)a.push({name:n[c],href:s[c],current:c===n.length-1});return React.createElement("nav",{className:"flex","aria-label":"Breadcrumb"},React.createElement("ol",{role:"list",className:"flex items-center space-x-4"},React.createElement("li",null,React.createElement("div",null,React.createElement("a",{href:r,className:"text-gray-400 hover:text-gray-500"},React.createElement(o,{className:"h-5 w-5 flex-shrink-0","aria-hidden":"true"}),React.createElement("span",{className:"sr-only"},"Home")))),a.map((function(e){return React.createElement("li",{key:e.name},React.createElement("div",{className:"flex items-center"},React.createElement(i,{className:"h-5 w-5 flex-shrink-0 text-gray-400","aria-hidden":"true"}),React.createElement("a",{href:e.href,className:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700","aria-current":e.current?"page":void 0},e.name)))}))))},l=s(497),u=function(e){var t=e.completedExercises,r=e.totalExercises;function o(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}return n().createElement("div",{className:"bg-gray-200",style:{borderRadius:"20px",padding:"1rem",minWidth:"400px",maxWidth:"800px",margin:"0 auto"}},n().createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n().createElement("ol",{role:"list",className:"flex items-center"},new Array(r).fill(0).map((function(e,i){return n().createElement("li",{key:i,className:o(i!==r-1?"pr-2 sm:pr-2":"","relative")},t>i?n().createElement(n().Fragment,null,n().createElement("div",{className:"relative flex h-8 w-8 items-center justify-center rounded-full bg-indigo-600"},n().createElement(l,{className:"h-5 w-5 text-white","aria-hidden":"true"}))):n().createElement(n().Fragment,null,n().createElement("div",{className:"group relative flex h-8 w-8 items-center justify-center rounded-full border-2 border-gray-400 bg-gray-400"})))}))),n().createElement("p",{style:{textAlign:"right"}},"".concat(t,"/").concat(r," Exercises Completed"))))};class h extends Error{constructor(e,t="FunctionsError",r){super(e),super.name=t,this.context=r}}class d extends h{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class f extends h{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class p extends h{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}class y{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>{return t=void 0,r=void 0,o=function*(){return yield(yield Promise.resolve().then(s.t.bind(s,98,23))).fetch(...e)},new((n=void 0)||(n=Promise))((function(e,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((o=o.apply(t,r||[])).next())}));var t,r,n,o}:fetch),(...e)=>t(...e)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r,n,o,i,s;return n=this,o=void 0,s=function*(){try{const{headers:n,method:o,body:i}=t;let s,a={};i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",s=i):"string"==typeof i?(a["Content-Type"]="text/plain",s=i):"undefined"!=typeof FormData&&i instanceof FormData?s=i:(a["Content-Type"]="application/json",s=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:s}).catch((e=>{throw new d(e)})),l=c.headers.get("x-relay-error");if(l&&"true"===l)throw new f(c);if(!c.ok)throw new p(c);let u,h=(null!==(r=c.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return u="application/json"===h?yield c.json():"application/octet-stream"===h?yield c.blob():"multipart/form-data"===h?yield c.formData():yield c.text(),{data:u,error:null}}catch(e){return{data:null,error:e}}},new((i=void 0)||(i=Promise))((function(e,t){function r(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}c((s=s.apply(n,o||[])).next())}))}}var v=s(98),m=s.n(v);class g{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.allowEmpty=e.allowEmpty,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=m():this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,r,n;let o=null,i=null,s=null,a=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const n=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),o=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");n&&o&&o.length>1&&(s=parseInt(o[1]))}else{const t=await e.text();try{o=JSON.parse(t),Array.isArray(o)&&404===e.status&&(i=[],o=null,a=200,c="OK")}catch(r){404===e.status&&""===t?(a=204,c="No Content"):o={message:t}}if(o&&this.allowEmpty&&(null===(n=null==o?void 0:o.details)||void 0===n?void 0:n.includes("Results contain 0 rows"))&&(o=null,a=200,c="OK"),o&&this.shouldThrowOnError)throw o}return{error:o,data:i,count:s,status:a,statusText:c}}));return this.shouldThrowOnError||(r=r.catch((e=>({error:{message:`FetchError: ${e.message}`,details:"",hint:"",code:e.code||""},data:null,count:null,status:0,statusText:""})))),r.then(e,t)}}class b extends g{select(e){let t=!1;const r=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n}={}){const o=n?`${n}.order`:"order",i=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const n=void 0===r?"offset":`${r}.offset`,o=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(o,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:o=!1,format:i="text"}={}){const s=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),a=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${a}"; options=${s};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class w extends b{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let o="";"plain"===n?o="pl":"phrase"===n?o="ph":"websearch"===n&&(o="w");const i=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class x{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=t,this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){const n=t?"HEAD":"GET";let o=!1;const i=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!o?"":('"'===e&&(o=!o),e))).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new w({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t}={}){const r=[],n=e;if(t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new w({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n}={}){const o=[`resolution=${r?"ignore":"merge"}-duplicates`];void 0!==t&&this.url.searchParams.set("on_conflict",t);const i=e;return n&&o.push(`count=${n}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new w({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r=[],n=e;return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new w({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new w({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const E={"X-Client-Info":"postgrest-js/1.5.0"};class _{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},E),t),this.schema=r,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new x(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:n}={}){let o;const i=new URL(`${this.url}/rpc/${e}`);let s;r?(o="HEAD",Object.entries(t).forEach((([e,t])=>{i.searchParams.append(e,`${t}`)}))):(o="POST",s=t);const a=Object.assign({},this.headers);return n&&(a.Prefer=`count=${n}`),new w({method:o,url:i,headers:a,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}}var S=s(840);const k={"X-Client-Info":"realtime-js/2.7.1"};var O,j,T,L,P,C,A;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(O||(O={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(j||(j={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(T||(T={})),function(e){e.websocket="websocket"}(L||(L={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(P||(P={}));class N{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class I{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),o=t.getUint8(2);let i=this.HEADER_LENGTH+2;const s=r.decode(e.slice(i,i+n));i+=n;const a=r.decode(e.slice(i,i+o));return i+=o,{ref:null,topic:s,event:a,payload:JSON.parse(r.decode(e.slice(i,e.byteLength)))}}}class R{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,"rate limited"===this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})&&(this.rateLimited=!0))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(C||(C={}));class ${constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},(e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$.syncState(this.state,e,t,r),this.pendingDiffs.forEach((e=>{this.state=$.syncDiff(this.state,e,t,r)})),this.pendingDiffs=[],n()})),this.channel._on(r.diff,{},(e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=$.syncDiff(this.state,e,t,r),n())})),this.onJoin(((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})})),this.onLeave(((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,r,n){const o=this.cloneDeep(e),i=this.transformState(t),s={},a={};return this.map(o,((e,t)=>{i[e]||(a[e]=t)})),this.map(i,((e,t)=>{const r=o[e];if(r){const n=t.map((e=>e.presence_ref)),o=r.map((e=>e.presence_ref)),i=t.filter((e=>o.indexOf(e.presence_ref)<0)),c=r.filter((e=>n.indexOf(e.presence_ref)<0));i.length>0&&(s[e]=i),c.length>0&&(a[e]=c)}else s[e]=t})),this.syncDiff(o,{joins:s,leaves:a},r,n)}static syncDiff(e,t,r,n){const{joins:o,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(o,((t,n)=>{var o;const i=null!==(o=e[t])&&void 0!==o?o:[];if(e[t]=this.cloneDeep(n),i.length>0){const r=e[t].map((e=>e.presence_ref)),n=i.filter((e=>r.indexOf(e.presence_ref)<0));e[t].unshift(...n)}r(t,i,n)})),this.map(i,((t,r)=>{let o=e[t];if(!o)return;const i=r.map((e=>e.presence_ref));o=o.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=o,n(t,o,r),0===o.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((r=>t(r,e[r])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):n,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(A||(A={}));const U=(e,t,r={})=>{var n;const o=null!==(n=r.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce(((r,n)=>(r[n]=D(n,e,t,o),r)),{})},D=(e,t,r,n)=>{const o=t.find((t=>t.name===e)),i=null==o?void 0:o.type,s=r[e];return i&&!n.includes(i)?F(i,s):B(s)},F=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return q(t,r)}switch(e){case A.bool:return G(t);case A.float4:case A.float8:case A.int2:case A.int4:case A.int8:case A.numeric:case A.oid:return M(t);case A.json:case A.jsonb:return z(t);case A.timestamp:return J(t);case A.abstime:case A.date:case A.daterange:case A.int4range:case A.int8range:case A.money:case A.reltime:case A.text:case A.time:case A.timestamptz:case A.timetz:case A.tsrange:case A.tstzrange:default:return B(t)}},B=e=>e,G=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},M=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},z=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},q=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const o=e.slice(1,r);try{n=JSON.parse("["+o+"]")}catch(e){n=o?o.split(","):[]}return n.map((e=>F(t,e)))}return e},J=e=>"string"==typeof e?e.replace(" ","T"):e;var H,W,K,Y=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(H||(H={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"}(W||(W={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(K||(K={}));class V{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=j.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new R(this,T.join,this.params,this.timeout),this.rejoinTimer=new N((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=j.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=j.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=j.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=j.errored,this.rejoinTimer.scheduleTimeout())})),this._on(T.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new $(this)}subscribe(e,t=this.timeout){var r,n;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:i}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const s={},a={broadcast:o,presence:i,postgres_changes:null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map((e=>e.filter)))&&void 0!==n?n:[]};this.socket.accessToken&&(s.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},s)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(({postgres_changes:t})=>{var r;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const n=this.bindings.postgres_changes,o=null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0,i=[];for(let r=0;r<o;r++){const o=n[r],{filter:{event:s,schema:a,table:c,filter:l}}=o,u=t&&t[r];if(!u||u.event!==s||u.schema!==a||u.table!==c||u.filter!==l)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},o),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{e&&e("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}track(e,t={}){return Y(this,void 0,void 0,(function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}))}untrack(e={}){return Y(this,void 0,void 0,(function*(){return yield this.send({type:"presence",event:"untrack"},e)}))}on(e,t,r){return this._on(e,t,r)}send(e,t={}){return new Promise((r=>{var n,o,i;const s=this._push(e.type,e,t.timeout||this.timeout);s.rateLimited&&r("rate limited"),"broadcast"!==e.type||(null===(i=null===(o=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===o?void 0:o.broadcast)||void 0===i?void 0:i.ack)||r("ok"),s.receive("ok",(()=>r("ok"))),s.receive("timeout",(()=>r("timed out")))}))}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=j.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(T.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((r=>{const n=new R(this,T.leave,{},e);n.receive("ok",(()=>{t(),r("ok")})).receive("timeout",(()=>{t(),r("timed out")})).receive("error",(()=>{r("error")})),n.send(),this._canPush()||n.trigger("ok",{})}))}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new R(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,o;const i=e.toLocaleLowerCase(),{close:s,error:a,leave:c,join:l}=T;if(r&&[s,a,c,l].indexOf(i)>=0&&r!==this._joinRef())return;let u=this._onMessage(i,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter((e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===i})).map((e=>e.callback(u,r))):null===(o=this.bindings[i])||void 0===o||o.filter((e=>{var r,n,o,s,a,c;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,s=null===(r=e.filter)||void 0===r?void 0:r.event;return i&&(null===(n=t.ids)||void 0===n?void 0:n.includes(i))&&("*"===s||(null==s?void 0:s.toLocaleLowerCase())===(null===(o=t.data)||void 0===o?void 0:o.type.toLocaleLowerCase()))}{const r=null===(a=null===(s=null==e?void 0:e.filter)||void 0===s?void 0:s.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===r||r===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:r,commit_timestamp:n,type:o,errors:i}=e,s={schema:t,table:r,commit_timestamp:n,eventType:o,new:{},old:{},errors:i};u=Object.assign(Object.assign({},s),this._getPayloadRecords(e))}e.callback(u,r)}))}_isClosed(){return this.state===j.closed}_isJoined(){return this.state===j.joined}_isJoining(){return this.state===j.joining}_isLeaving(){return this.state===j.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),o={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter((e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&V.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(T.close,{},e)}_onError(e){this._on(T.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=j.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=U(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=U(e.columns,e.old_record)),t}}var Z=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const X=()=>{};class Q{constructor(e,t){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=k,this.params={},this.timeout=1e4,this.transport=S.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=X,this.conn=null,this.sendBuffer=[],this.serializer=new I,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${L.websocket}`,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.transport)&&(this.transport=t.transport),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.eventsPerSecond;n&&(this.eventsPerSecondLimitMs=Math.floor(1e3/n)),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new N((()=>Z(this,void 0,void 0,(function*(){this.disconnect(),this.connect()}))),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return Z(this,void 0,void 0,(function*(){const t=yield e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}))}removeAllChannels(){return Z(this,void 0,void 0,(function*(){const e=yield Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}))}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case O.connecting:return P.Connecting;case O.open:return P.Open;case O.closing:return P.Closing;default:return P.Closed}}isConnected(){return this.connectionState()===P.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const r=new V(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:n,ref:o}=e;let i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};if(this.log("push",`${t} ${r} (${o})`,n),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(i)())return"rate limited"}else i();else this.sendBuffer.push(i)}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(T.access_token,{access_token:e})}))}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:r,payload:n,ref:o}=e;(o&&o===this.pendingHeartbeatRef||r===(null==n?void 0:n.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${t} ${r} ${o&&"("+o+")"||""}`,n),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(r,n,o))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(T.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>!!this.inThrottle||(e(),t>0&&(this.inThrottle=!0,setTimeout((()=>{this.inThrottle=!1}),t)),!1)}}class ee extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function te(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class re extends ee{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ne extends ee{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var oe=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const ie=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>oe(void 0,void 0,void 0,(function*(){return yield(yield Promise.resolve().then(s.t.bind(s,98,23))).fetch(...e)})):fetch),(...e)=>t(...e)};var se=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const ae=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ce=(e,t)=>se(void 0,void 0,void 0,(function*(){const r=yield oe(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(s.t.bind(s,98,23))).Response:Response}));e instanceof r?e.json().then((r=>{t(new re(ae(r),e.status||500))})).catch((e=>{t(new ne(ae(e),e))})):t(new ne(ae(e),e))})),le=(e,t,r,n)=>{const o={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),r))};function ue(e,t,r,n,o,i){return se(this,void 0,void 0,(function*(){return new Promise(((s,a)=>{e(r,le(t,n,o,i)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()})).then((e=>s(e))).catch((e=>ce(e,a)))}))}))}function he(e,t,r,n){return se(this,void 0,void 0,(function*(){return ue(e,"GET",t,r,n)}))}function de(e,t,r,n,o){return se(this,void 0,void 0,(function*(){return ue(e,"POST",t,n,o,r)}))}function fe(e,t,r,n,o){return se(this,void 0,void 0,(function*(){return ue(e,"DELETE",t,n,o,r)}))}var pe=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const ye={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ve={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class me{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=ie(n)}uploadOrUpdate(e,t,r,n){return pe(this,void 0,void 0,(function*(){try{let o;const i=Object.assign(Object.assign({},ve),n),s=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),o.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl)):(o=r,s["cache-control"]=`max-age=${i.cacheControl}`,s["content-type"]=i.contentType);const a=this._removeEmptyFolders(t),c=this._getFinalPath(a),l=yield this.fetch(`${this.url}/object/${c}`,{method:e,body:o,headers:s});return l.ok?{data:{path:a},error:null}:{data:null,error:yield l.json()}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}upload(e,t,r){return pe(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,r)}))}update(e,t,r){return pe(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,r)}))}move(e,t){return pe(this,void 0,void 0,(function*(){try{return{data:yield de(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}copy(e,t){return pe(this,void 0,void 0,(function*(){try{return{data:{path:(yield de(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}createSignedUrl(e,t,r){return pe(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e),o=yield de(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const i=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}createSignedUrls(e,t,r){return pe(this,void 0,void 0,(function*(){try{const n=yield de(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${o}`):null}))),error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}download(e,t){return pe(this,void 0,void 0,(function*(){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),o=n?`?${n}`:"";try{const t=this._getFinalPath(e),n=yield he(this.fetch,`${this.url}/${r}/${t}${o}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],o=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==o&&n.push(o);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==s&&n.push(s);let a=n.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${a}`)}}}remove(e){return pe(this,void 0,void 0,(function*(){try{return{data:yield fe(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}list(e,t,r){return pe(this,void 0,void 0,(function*(){try{const n=Object.assign(Object.assign(Object.assign({},ye),t),{prefix:e||""});return{data:yield de(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ge={"X-Client-Info":"storage-js/2.3.1"};var be=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class we{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},ge),t),this.fetch=ie(r)}listBuckets(){return be(this,void 0,void 0,(function*(){try{return{data:yield he(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}getBucket(e){return be(this,void 0,void 0,(function*(){try{return{data:yield he(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}createBucket(e,t={public:!1}){return be(this,void 0,void 0,(function*(){try{return{data:yield de(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}updateBucket(e,t){return be(this,void 0,void 0,(function*(){try{const r=yield function(e,t,r,n,o){return se(this,void 0,void 0,(function*(){return ue(e,"PUT",t,n,undefined,r)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers});return{data:r,error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}emptyBucket(e){return be(this,void 0,void 0,(function*(){try{return{data:yield de(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}deleteBucket(e){return be(this,void 0,void 0,(function*(){try{return{data:yield fe(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}}))}}class xe extends we{constructor(e,t={},r){super(e,t,r)}from(e){return new me(this.url,this.headers,e,this.fetch)}}const Ee=e=>{let t;return t=e||("undefined"==typeof fetch?m():fetch),(...e)=>t(...e)},_e=(e,t,r)=>{const n=Ee(r),o="undefined"==typeof Headers?v.Headers:Headers;return(r,i)=>{return s=void 0,a=void 0,l=function*(){var s;const a=null!==(s=yield t())&&void 0!==s?s:e;let c=new o(null==i?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),n(r,Object.assign(Object.assign({},i),{headers:c}))},new((c=void 0)||(c=Promise))((function(e,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof c?o:new c((function(e){e(o)}))).then(r,n)}o((l=l.apply(s,a||[])).next())}));var s,a,c,l}};var Se=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const ke=()=>"undefined"!=typeof document,Oe={tested:!1,writable:!1},je=()=>{if(!ke())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(Oe.tested)return Oe.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Oe.tested=!0,Oe.writable=!0}catch(e){Oe.tested=!0,Oe.writable=!1}return Oe.writable};function Te(e,t){var r;t||(t=(null===(r=null===window||void 0===window?void 0:window.location)||void 0===r?void 0:r.href)||""),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}const Le=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Se(void 0,void 0,void 0,(function*(){return yield(yield Promise.resolve().then(s.t.bind(s,98,23))).fetch(...e)})):fetch),(...e)=>t(...e)},Pe=(e,t,r)=>Se(void 0,void 0,void 0,(function*(){yield e.setItem(t,JSON.stringify(r))})),Ce=(e,t)=>Se(void 0,void 0,void 0,(function*(){const r=yield e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}})),Ae=(e,t)=>Se(void 0,void 0,void 0,(function*(){yield e.removeItem(t)}));class Ne{constructor(){this.promise=new Ne.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function Ie(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r,n,o,i,s,a,c,l="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)i=t.indexOf(e.charAt(u++)),s=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),r=i<<2|s>>4,n=(15&s)<<4|a>>2,o=(3&a)<<6|c,l+=String.fromCharCode(r),64!=a&&0!=n&&(l+=String.fromCharCode(n)),64!=c&&0!=o&&(l+=String.fromCharCode(o));return l}(r))}function Re(e){return("0"+e.toString(16)).substr(-2)}Ne.promiseConstructor=Promise;class $e extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Ue(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class De extends $e{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Fe extends $e{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Be extends $e{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ge extends Be{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Me extends Be{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class ze extends Be{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qe extends Be{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}var Je=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const He=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);function We(e,t,r,n){var o;return Je(this,void 0,void 0,(function*(){const i=Object.assign({},null==n?void 0:n.headers);(null==n?void 0:n.jwt)&&(i.Authorization=`Bearer ${n.jwt}`);const s=null!==(o=null==n?void 0:n.query)&&void 0!==o?o:{};(null==n?void 0:n.redirectTo)&&(s.redirect_to=n.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=yield function(e,t,r,n,o,i){return Je(this,void 0,void 0,(function*(){return new Promise(((s,a)=>{e(r,((e,t,r,n)=>{const o={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),r))})(t,n,o,i)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()})).then((e=>s(e))).catch((e=>((e,t)=>Je(void 0,void 0,void 0,(function*(){var r;"object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json?[502,503,504].includes(e.status)?t(new qe(He(e),e.status)):e.json().then((r=>{t(new De(He(r),e.status||500))})).catch((e=>{t(new Fe(He(e),e))})):t(new qe(He(e),0))})))(e,a)))}))}))}(e,t,r+a,{headers:i,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(c):{data:Object.assign({},c),error:null}}))}function Ke(e){var t;let r=null;var n;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(r=Object.assign({},e),r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)),{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Ye(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Ve(e){return{data:e,error:null}}function Ze(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:o,verification_type:i}=e,s=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:o,verification_type:i},user:Object.assign({},s)},error:null}}function Xe(e){return e}var Qe=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class et{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Le(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return Qe(this,void 0,void 0,(function*(){try{return yield We(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(Ue(e))return{data:null,error:e};throw e}}))}inviteUserByEmail(e,t={}){return Qe(this,void 0,void 0,(function*(){try{return yield We(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ye})}catch(e){if(Ue(e))return{data:{user:null},error:e};throw e}}))}generateLink(e){return Qe(this,void 0,void 0,(function*(){try{const{options:t}=e,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),yield We(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Ze,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(Ue(e))return{data:{properties:null,user:null},error:e};throw e}}))}createUser(e){return Qe(this,void 0,void 0,(function*(){try{return yield We(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ye})}catch(e){if(Ue(e))return{data:{user:null},error:e};throw e}}))}listUsers(e){var t,r,n,o,i,s,a;return Qe(this,void 0,void 0,(function*(){try{const c={nextPage:null,lastPage:0,total:0},l=yield We(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(o=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==o?o:""},xform:Xe});if(l.error)throw l.error;const u=yield l.json(),h=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(a=null===(s=l.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);c[`${r}Page`]=t})),c.total=parseInt(h)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(e){if(Ue(e))return{data:{users:[]},error:e};throw e}}))}getUserById(e){return Qe(this,void 0,void 0,(function*(){try{return yield We(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ye})}catch(e){if(Ue(e))return{data:{user:null},error:e};throw e}}))}updateUserById(e,t){return Qe(this,void 0,void 0,(function*(){try{return yield We(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ye})}catch(e){if(Ue(e))return{data:{user:null},error:e};throw e}}))}deleteUser(e,t=!1){return Qe(this,void 0,void 0,(function*(){try{return yield We(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ye})}catch(e){if(Ue(e))return{data:{user:null},error:e};throw e}}))}_listFactors(e){return Qe(this,void 0,void 0,(function*(){try{const{data:t,error:r}=yield We(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(e){if(Ue(e))return{data:null,error:e};throw e}}))}_deleteFactor(e){return Qe(this,void 0,void 0,(function*(){try{return{data:yield We(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(Ue(e))return{data:null,error:e};throw e}}))}}var tt={getItem:e=>je()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{je()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{je()&&globalThis.localStorage.removeItem(e)}},rt=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const nt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.18.1"}},ot=1e4;class it{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null;const r=Object.assign(Object.assign({},nt),e);if(this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||tt,this.admin=new et({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Le(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},ke()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(t=this.broadcastChannel)||void 0===t||t.addEventListener("message",(e=>{this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return rt(this,void 0,void 0,(function*(){if(this.initializePromise)return this.initializePromise;try{if(this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:e,error:t}=yield this._getSessionFromUrl();if(t)return yield this._removeSession(),{error:t};const{session:r,redirectType:n}=e;return yield this._saveSession(r),setTimeout((()=>{"recovery"===n?this._notifyAllSubscribers("PASSWORD_RECOVERY",r):this._notifyAllSubscribers("SIGNED_IN",r)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return Ue(e)?{error:e}:{error:new Fe("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange()}}))}signUp(e){var t,r;return rt(this,void 0,void 0,(function*(){try{let n;if(yield this._removeSession(),"email"in e){const{email:r,password:o,options:i}=e;n=yield We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:r,password:o,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Ke})}else{if(!("phone"in e))throw new Me("You must provide either an email or phone number and a password");{const{phone:t,password:o,options:i}=e;n=yield We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:o,data:null!==(r=null==i?void 0:i.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Ke})}}const{data:o,error:i}=n;if(i||!o)return{data:{user:null,session:null},error:i};const s=o.session,a=o.user;return o.session&&(yield this._saveSession(o.session),this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:a,session:s},error:null}}catch(e){if(Ue(e))return{data:{user:null,session:null},error:e};throw e}}))}signInWithPassword(e){var t;return rt(this,void 0,void 0,(function*(){try{let r;if(yield this._removeSession(),"email"in e){const{email:t,password:n,options:o}=e;r=yield We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:t,password:n,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:Ke})}else{if(!("phone"in e))throw new Me("You must provide either an email or phone number and a password");{const{phone:n,password:o,options:i}=e;r=yield We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:o,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},channel:null!==(t=null==i?void 0:i.channel)&&void 0!==t?t:"sms"},xform:Ke})}}const{data:n,error:o}=r;return o||!n?{data:{user:null,session:null},error:o}:(n.session&&(yield this._saveSession(n.session),this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:o})}catch(e){if(Ue(e))return{data:{user:null,session:null},error:e};throw e}}))}signInWithOAuth(e){var t,r,n,o,i,s;return rt(this,void 0,void 0,(function*(){return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(o=e.options)||void 0===o?void 0:o.skipBrowserRedirect,flowType:null!==(s=null===(i=e.options)||void 0===i?void 0:i.flowType)&&void 0!==s?s:"implicit"})}))}exchangeCodeForSession(e){return rt(this,void 0,void 0,(function*(){const t=yield Ce(this.storage,`${this.storageKey}-oauth-code-verifier`),{data:r,error:n}=yield We(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:Ke});return yield Ae(this.storage,`${this.storageKey}-oauth-code-verifier`),n||!r?{data:{user:null,session:null},error:n}:(r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:n})}))}signInWithIdToken(e){return rt(this,void 0,void 0,(function*(){yield this._removeSession();try{const{options:t,provider:r,token:n,nonce:o}=e,i=yield We(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,nonce:o,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Ke}),{data:s,error:a}=i;return a||!s?{data:{user:null,session:null},error:a}:(s.session&&(yield this._saveSession(s.session),this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:a})}catch(e){if(Ue(e))return{data:{user:null,session:null},error:e};throw e}}))}signInWithOtp(e){var t,r,n,o,i;return rt(this,void 0,void 0,(function*(){try{if(yield this._removeSession(),"email"in e){const{email:n,options:o}=e,{error:i}=yield We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==o?void 0:o.data)&&void 0!==t?t:{},create_user:null===(r=null==o?void 0:o.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},redirectTo:null==o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:t,options:r}=e,{error:s}=yield We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(o=null==r?void 0:r.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(i=null==r?void 0:r.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null},error:s}}throw new Me("You must provide either an email or phone number.")}catch(e){if(Ue(e))return{data:{user:null,session:null},error:e};throw e}}))}verifyOtp(e){var t,r;return rt(this,void 0,void 0,(function*(){try{yield this._removeSession();const{data:n,error:o}=yield We(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:null===(t=e.options)||void 0===t?void 0:t.captchaToken}}),redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,xform:Ke});if(o)throw o;if(!n)throw"An error occurred on token verification.";const i=n.session,s=n.user;return(null==i?void 0:i.access_token)&&(yield this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:s,session:i},error:null}}catch(e){if(Ue(e))return{data:{user:null,session:null},error:e};throw e}}))}signInWithSSO(e){var t,r,n;return rt(this,void 0,void 0,(function*(){try{return yield this._removeSession(),yield We(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:Ve})}catch(e){if(Ue(e))return{data:null,error:e};throw e}}))}getSession(){return rt(this,void 0,void 0,(function*(){yield this.initializePromise;let e=null;if(this.persistSession){const t=yield Ce(this.storage,this.storageKey);null!==t&&(this._isValidSession(t)?e=t:yield this._removeSession())}else e=this.inMemorySession;if(!e)return{data:{session:null},error:null};if(!(e.expires_at&&e.expires_at<=Date.now()/1e3))return{data:{session:e},error:null};const{session:t,error:r}=yield this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:t},error:null}}))}getUser(e){var t,r;return rt(this,void 0,void 0,(function*(){try{if(!e){const{data:n,error:o}=yield this.getSession();if(o)throw o;e=null!==(r=null===(t=n.session)||void 0===t?void 0:t.access_token)&&void 0!==r?r:void 0}return yield We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ye})}catch(e){if(Ue(e))return{data:{user:null},error:e};throw e}}))}updateUser(e,t={}){return rt(this,void 0,void 0,(function*(){try{const{data:r,error:n}=yield this.getSession();if(n)throw n;if(!r.session)throw new Ge;const o=r.session,{data:i,error:s}=yield We(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:e,jwt:o.access_token,xform:Ye});if(s)throw s;return o.user=i.user,yield this._saveSession(o),this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}}catch(e){if(Ue(e))return{data:{user:null},error:e};throw e}}))}_decodeJWT(e){return Ie(e)}setSession(e){return rt(this,void 0,void 0,(function*(){try{if(!e.access_token||!e.refresh_token)throw new Ge;const t=Date.now()/1e3;let r=t,n=!0,o=null;const i=Ie(e.access_token);if(i.exp&&(r=i.exp,n=r<=t),n){const{session:t,error:r}=yield this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};o=t}else{const{data:n,error:i}=yield this.getUser(e.access_token);if(i)throw i;o={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},yield this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(e){if(Ue(e))return{data:{session:null,user:null},error:e};throw e}}))}refreshSession(e){var t;return rt(this,void 0,void 0,(function*(){try{if(!e){const{data:r,error:n}=yield this.getSession();if(n)throw n;e=null!==(t=r.session)&&void 0!==t?t:void 0}if(!(null==e?void 0:e.refresh_token))throw new Ge;const{session:r,error:n}=yield this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}catch(e){if(Ue(e))return{data:{user:null,session:null},error:e};throw e}}))}_getSessionFromUrl(){return rt(this,void 0,void 0,(function*(){try{if(!ke())throw new ze("No browser detected.");if(!this._isImplicitGrantFlow())throw new ze("Not a valid implicit grant flow url.");const e=Te("error_description");if(e){const t=Te("error_code");if(!t)throw new ze("No error_code detected.");const r=Te("error");if(!r)throw new ze("No error detected.");throw new ze(e,{error:r,code:t})}const t=Te("provider_token"),r=Te("provider_refresh_token"),n=Te("access_token");if(!n)throw new ze("No access_token detected.");const o=Te("expires_in");if(!o)throw new ze("No expires_in detected.");const i=Te("refresh_token");if(!i)throw new ze("No refresh_token detected.");const s=Te("token_type");if(!s)throw new ze("No token_type detected.");const a=Math.round(Date.now()/1e3)+parseInt(o),{data:c,error:l}=yield this.getUser(n);if(l)throw l;const u=c.user,h={provider_token:t,provider_refresh_token:r,access_token:n,expires_in:parseInt(o),expires_at:a,refresh_token:i,token_type:s,user:u},d=Te("type");return window.location.hash="",{data:{session:h,redirectType:d},error:null}}catch(e){if(Ue(e))return{data:{session:null,redirectType:null},error:e};throw e}}))}_isImplicitGrantFlow(){return ke()&&(Boolean(Te("access_token"))||Boolean(Te("error_description")))}signOut(){var e;return rt(this,void 0,void 0,(function*(){const{data:t,error:r}=yield this.getSession();if(r)return{error:r};const n=null===(e=t.session)||void 0===e?void 0:e.access_token;if(n){const{error:e}=yield this.admin.signOut(n);if(e&&(!function(e){return Ue(e)&&"AuthApiError"===e.name}(e)||404!==e.status&&401!==e.status))return{error:e}}return yield this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),this.emitInitialSession(t),{data:{subscription:r}}}emitInitialSession(e){var t,r;return rt(this,void 0,void 0,(function*(){try{const{data:{session:r},error:n}=yield this.getSession();if(n)throw n;null===(t=this.stateChangeEmitters.get(e))||void 0===t||t.callback("INITIAL_SESSION",r)}catch(t){null===(r=this.stateChangeEmitters.get(e))||void 0===r||r.callback("INITIAL_SESSION",null),console.error(t)}}))}resetPasswordForEmail(e,t={}){return rt(this,void 0,void 0,(function*(){try{return yield We(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(Ue(e))return{data:null,error:e};throw e}}))}_refreshAccessToken(e){return rt(this,void 0,void 0,(function*(){try{const t=Date.now();return yield function(e,t){return new Promise(((r,n)=>{(()=>{Se(this,void 0,void 0,(function*(){for(let o=0;o<1/0;o++)try{const n=yield e(o);if(!t(o,0,n))return void r(n)}catch(e){if(!t(o))return void n(e)}}))})()}))}((t=>rt(this,void 0,void 0,(function*(){var r;return yield(r=200*t,new Promise((e=>{setTimeout((()=>e(null)),r)}))),yield We(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ke})}))),((e,r,n)=>n&&n.error&&n.error instanceof qe&&Date.now()+200*(e+1)-t<ot))}catch(e){if(Ue(e))return{data:{session:null,user:null},error:e};throw e}}))}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return rt(this,void 0,void 0,(function*(){const r=yield this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams,flowType:t.flowType});return ke()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}))}_recoverAndRefresh(){var e;return rt(this,void 0,void 0,(function*(){try{const t=yield Ce(this.storage,this.storageKey);if(!this._isValidSession(t))return void(null!==t&&(yield this._removeSession()));const r=Math.round(Date.now()/1e3);if((null!==(e=t.expires_at)&&void 0!==e?e:1/0)<r+10)if(this.autoRefreshToken&&t.refresh_token){const{error:e}=yield this._callRefreshToken(t.refresh_token);e&&(console.log(e.message),yield this._removeSession())}else yield this._removeSession();else this.persistSession&&(yield this._saveSession(t)),this._notifyAllSubscribers("SIGNED_IN",t)}catch(e){return void console.error(e)}}))}_callRefreshToken(e){var t,r;return rt(this,void 0,void 0,(function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new Ne,!e)throw new Ge;const{data:t,error:r}=yield this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new Ge;yield this._saveSession(t.session),this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(e){if(Ue(e)){const r={session:null,error:e};return null===(t=this.refreshingDeferred)||void 0===t||t.resolve(r),r}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(e),e}finally{this.refreshingDeferred=null}}))}_notifyAllSubscribers(e,t,r=!0){this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t}),this.stateChangeEmitters.forEach((r=>r.callback(e,t)))}_saveSession(e){return rt(this,void 0,void 0,(function*(){this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&(yield this._persistSession(e))}))}_persistSession(e){return Pe(this.storage,this.storageKey,e)}_removeSession(){return rt(this,void 0,void 0,(function*(){this.persistSession?yield Ae(this.storage,this.storageKey):this.inMemorySession=null}))}_removeVisibilityChangedCallback(){const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ke()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}_startAutoRefresh(){return rt(this,void 0,void 0,(function*(){yield this._stopAutoRefresh();const e=setInterval((()=>this._autoRefreshTokenTick()),ot);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref&&e.unref(),yield this._autoRefreshTokenTick()}))}_stopAutoRefresh(){return rt(this,void 0,void 0,(function*(){const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}))}startAutoRefresh(){return rt(this,void 0,void 0,(function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()}))}stopAutoRefresh(){return rt(this,void 0,void 0,(function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()}))}_autoRefreshTokenTick(){return rt(this,void 0,void 0,(function*(){const e=Date.now();try{const{data:{session:t}}=yield this.getSession();if(!t||!t.refresh_token||!t.expires_at)return;Math.floor((1e3*t.expires_at-e)/ot)<3&&(yield this._callRefreshToken(t.refresh_token))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}))}_handleVisibilityChange(){return rt(this,void 0,void 0,(function*(){if(!ke()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>rt(this,void 0,void 0,(function*(){return yield this._onVisibilityChanged(!1)})),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}))}_onVisibilityChanged(e){return rt(this,void 0,void 0,(function*(){"visible"===document.visibilityState?(e||(yield this.initializePromise,yield this._recoverAndRefresh()),this.autoRefreshToken&&this._startAutoRefresh()):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}))}_getUrlForProvider(e,t){return rt(this,void 0,void 0,(function*(){const r=[`provider=${encodeURIComponent(e)}`];if((null==t?void 0:t.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),"pkce"===(null==t?void 0:t.flowType)){const e=function(){const e=new Uint32Array(56);if(void 0===window.crypto)throw"PKCE is not supported on devices without WebCrypto API support or equivalent polyfills";return window.crypto.getRandomValues(e),Array.from(e,Re).join("")}();yield Pe(this.storage,`${this.storageKey}-oauth-code-verifier`,e);const n=yield function(e){return Se(this,void 0,void 0,(function*(){const t=yield function(e){return Se(this,void 0,void 0,(function*(){const t=(new TextEncoder).encode(e);if(void 0===window.crypto)throw"PKCE is not supported on devices without WebCrypto API support or equivalent polyfills";const r=yield window.crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map((e=>String.fromCharCode(e))).join("")}))}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}))}(e),o=new URLSearchParams({flow_type:`${encodeURIComponent(t.flowType)}`,code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent("s256")}`});r.push(o.toString())}if(null==t?void 0:t.queryParams){const e=new URLSearchParams(t.queryParams);r.push(e.toString())}return`${this.url}/authorize?${r.join("&")}`}))}_unenroll(e){var t;return rt(this,void 0,void 0,(function*(){try{const{data:r,error:n}=yield this.getSession();return n?{data:null,error:n}:yield We(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(t=null==r?void 0:r.session)||void 0===t?void 0:t.access_token})}catch(e){if(Ue(e))return{data:null,error:e};throw e}}))}_enroll(e){var t,r;return rt(this,void 0,void 0,(function*(){try{const{data:n,error:o}=yield this.getSession();if(o)return{data:null,error:o};const{data:i,error:s}=yield We(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(t=null==n?void 0:n.session)||void 0===t?void 0:t.access_token});return s?{data:null,error:s}:((null===(r=null==i?void 0:i.totp)||void 0===r?void 0:r.qr_code)&&(i.totp.qr_code=`data:image/svg+xml;utf-8,${i.totp.qr_code}`),{data:i,error:null})}catch(e){if(Ue(e))return{data:null,error:e};throw e}}))}_verify(e){var t;return rt(this,void 0,void 0,(function*(){try{const{data:r,error:n}=yield this.getSession();if(n)return{data:null,error:n};const{data:o,error:i}=yield We(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(t=null==r?void 0:r.session)||void 0===t?void 0:t.access_token});return i?{data:null,error:i}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:i})}catch(e){if(Ue(e))return{data:null,error:e};throw e}}))}_challenge(e){var t;return rt(this,void 0,void 0,(function*(){try{const{data:r,error:n}=yield this.getSession();return n?{data:null,error:n}:yield We(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(t=null==r?void 0:r.session)||void 0===t?void 0:t.access_token})}catch(e){if(Ue(e))return{data:null,error:e};throw e}}))}_challengeAndVerify(e){return rt(this,void 0,void 0,(function*(){const{data:t,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}))}_listFactors(){return rt(this,void 0,void 0,(function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const r=(null==e?void 0:e.factors)||[],n=r.filter((e=>"totp"===e.factor_type&&"verified"===e.status));return{data:{all:r,totp:n},error:null}}))}_getAuthenticatorAssuranceLevel(){var e,t;return rt(this,void 0,void 0,(function*(){const{data:{session:r},error:n}=yield this.getSession();if(n)return{data:null,error:n};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let i=null;o.aal&&(i=o.aal);let s=i;return(null!==(t=null===(e=r.user.factors)||void 0===e?void 0:e.filter((e=>"verified"===e.status)))&&void 0!==t?t:[]).length>0&&(s="aal2"),{data:{currentLevel:i,nextLevel:s,currentAuthenticationMethods:o.amr||[]},error:null}}))}}class st extends it{constructor(e){super(e)}}const at={headers:{"X-Client-Info":"supabase-js/2.14.0"}},ct={schema:"public"},lt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},ut={};var ht="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJqeG14c3ZqaHpmbnNqZGRxdWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODAyMTkwNDEsImV4cCI6MTk5NTc5NTA0MX0.v08prP226slMHbZswt1DikEvI6E29eC5uIn7Q56unqg",dt=new class{constructor(e,t,r){var n,o,i,s,a,c,l,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=e.replace(/\/$/,"");if(this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,h.match(/(supabase\.co)|(supabase\.in)/)){const e=h.split(".");this.functionsUrl=`${e[0]}.functions.${e[1]}.${e[2]}`}else this.functionsUrl=`${h}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f=function(e,t){const{db:r,auth:n,realtime:o,global:i}=e,{db:s,auth:a,realtime:c,global:l}=t;return{db:Object.assign(Object.assign({},s),r),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign({},l),i)}}(null!=r?r:{},{db:ct,realtime:ut,auth:Object.assign(Object.assign({},lt),{storageKey:d}),global:at});this.storageKey=null!==(o=null===(n=f.auth)||void 0===n?void 0:n.storageKey)&&void 0!==o?o:"",this.headers=null!==(s=null===(i=f.global)||void 0===i?void 0:i.headers)&&void 0!==s?s:{},this.auth=this._initSupabaseAuthClient(null!==(a=f.auth)&&void 0!==a?a:{},this.headers,null===(c=f.global)||void 0===c?void 0:c.fetch),this.fetch=_e(t,this._getAccessToken.bind(this),null===(l=f.global)||void 0===l?void 0:l.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},f.realtime)),this.rest=new _(`${h}/rest/v1`,{headers:this.headers,schema:null===(u=f.db)||void 0===u?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new y(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new xe(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t,r,n,o,i;return r=this,n=void 0,i=function*(){const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null},new((o=void 0)||(o=Promise))((function(e,t){function s(e){try{c(i.next(e))}catch(e){t(e)}}function a(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(s,a)}c((i=i.apply(r,n||[])).next())}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:o},i,s){const a={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new st({url:this.authUrl,headers:Object.assign(Object.assign({},a),i),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,fetch:s})}_initRealtimeClient(e){return new Q(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,null==t?void 0:t.access_token,"CLIENT")}))}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===t?"SIGNED_OUT"!==e&&"USER_DELETED"!==e||(this.realtime.setAuth(this.supabaseKey),"STORAGE"==r&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=t?t:null),this.changedAccessToken=t)}}("https://bjxmxsvjhzfnsjddquiz.supabase.co",ht,undefined);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function pt(e){return function(e){if(Array.isArray(e))return yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return yt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ft(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ft(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bt(){bt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,s=Object.create(i.prototype),a=new k(o||[]);return n(s,"_invoke",{value:x(e,r,a)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h={};function d(){}function f(){}function p(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(O([])));m&&m!==t&&r.call(m,i)&&(y=m);var g=p.prototype=d.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,s,a){var c=u(e[n],e,i);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==ft(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){o("next",e,s,a)}),(function(e){o("throw",e,s,a)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return o("throw",e,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=E(s,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(g),c(g,a,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function wt(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function xt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){wt(i,n,o,s,a,"next",e)}function a(e){wt(i,n,o,s,a,"throw",e)}s(void 0)}))}}function Et(e,t){return _t.apply(this,arguments)}function _t(){return(_t=xt(bt().mark((function e(t,r){var n,o,i,s,a,c,l;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.auth.getSession();case 2:if(e.t1=n=e.sent.data,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===n;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=null===(o=n.session)||void 0===o?void 0:o.user;case 11:if(s=e.t2){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,dt.from("exerciseResponses").select("*").eq("exercise_id",t).eq("user_id",s.id).maybeSingle();case 16:if(a=e.sent,c=a.data,(l=a.error)&&console.error(l),c&&null!=c&&c.responses){e.next=24;break}return e.next=23,dt.from("exerciseResponses").insert({exercise_id:t,user_id:s.id,responses:{all:[{id:r,question:null,response:"",followups:[]}]}});case 23:return e.abrupt("return","");case 24:return e.abrupt("return",null==c||null===(i=c.responses.all.find((function(e){return e.id===r})))||void 0===i?void 0:i.response);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e){return kt.apply(this,arguments)}function kt(){return(kt=xt(bt().mark((function e(t){var r,n,o,i,s,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.auth.getSession();case 2:if(e.t1=r=e.sent.data,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===r;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=null===(n=r.session)||void 0===n?void 0:n.user;case 11:if(o=e.t2){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,dt.from("exerciseResponses").select("is_completed").eq("exercise_id",t).eq("user_id",o.id).maybeSingle();case 16:return i=e.sent,s=i.data,(a=i.error)&&console.error(a),e.abrupt("return",!(null==s||!s.is_completed));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e,t){return jt.apply(this,arguments)}function jt(){return(jt=xt(bt().mark((function e(t,r){var n,o,i,s,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.auth.getSession();case 2:if(e.t1=n=e.sent.data,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===n;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=null===(o=n.session)||void 0===o?void 0:o.user;case 11:if(i=e.t2){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,dt.from("exerciseResponses").update({is_completed:r}).eq("exercise_id",t).eq("user_id",i.id);case 16:return s=e.sent,(a=s.error)&&console.error(a),e.abrupt("return",!a);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(){return(Tt=xt(bt().mark((function e(t,r,n){var o,i,s,a,c,l,u,h,d,f,p;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.auth.getSession();case 2:if(e.t1=o=e.sent.data,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===o;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=null===(i=o.session)||void 0===i?void 0:i.user;case 11:if(c=e.t2){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,dt.from("exerciseResponses").select("*").eq("exercise_id",t).eq("user_id",c.id).maybeSingle();case 16:if(l=e.sent,u=l.data,h=l.error,u&&!h){e.next=22;break}return console.error(h||"Could not fetch exerciseResponse data"),e.abrupt("return");case 22:return d=mt(mt({},null!==(s=u.responses)&&void 0!==s?s:{}),{},{all:[{id:r,question:null,response:n,followups:[]}]}),null!==(a=u.responses.all)&&void 0!==a&&a.length&&(f=u.responses.all.findIndex((function(e){return e.id===r})),d.all=f>=0?[].concat(pt(u.responses.all.slice(0,f)),[mt(mt({},u.responses.all[f]),{},{response:n})],pt(u.responses.all.slice(f+1))):[].concat(pt(u.responses.all),pt(d.all))),e.next=26,dt.from("exerciseResponses").update({responses:d}).eq("exercise_id",t).eq("user_id",c.id);case 26:p=e.sent,(h=p.error)&&console.error(h);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function Pt(){Pt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,s=Object.create(i.prototype),a=new k(o||[]);return n(s,"_invoke",{value:x(e,r,a)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h={};function d(){}function f(){}function p(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(O([])));m&&m!==t&&r.call(m,i)&&(y=m);var g=p.prototype=d.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,s,a){var c=u(e[n],e,i);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==Lt(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){o("next",e,s,a)}),(function(e){o("throw",e,s,a)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return o("throw",e,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=E(s,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(g),c(g,a,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function Ct(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function At(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){Ct(i,n,o,s,a,"next",e)}function a(e){Ct(i,n,o,s,a,"throw",e)}s(void 0)}))}}function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return It(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?It(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rt=function(e){e.uuid;var t=e.breadcrumbsContext,o=e.Title,i=e.exerciseEntries,s=e.storyElements,a=e.exercisesElements,l=(0,r.useRef)(document.createElement("div")),h=Nt((0,r.useState)({}),2),d=h[0],f=h[1],p=Nt((0,r.useState)(0),2),y=p[0],v=p[1],m=Nt((0,r.useState)(0),2),g=m[0],b=m[1],w=Nt((0,r.useState)(!0),2),x=w[0],E=w[1],_=function(){var e=At(Pt().mark((function e(t){var r,n,o,i;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.entries(t),n=r.map(function(){var e=At(Pt().mark((function e(t){var r,n,o,i;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nt(t,2),n=r[0],o=r[1],e.next=3,St(o);case 3:return i=e.sent,e.abrupt("return",[n,i]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(n);case 4:o=e.sent,i=Object.fromEntries(o),f(i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){_(i)}),[i]),(0,r.useEffect)((function(){!function(e){var t=Object.values(e).filter((function(e){return e})).length,r=Object.values(e).length;t>0&&E(!1),v(t),b(r)}(d)}),[d]),(0,r.useEffect)((function(){var e;e=x?s:a,function(){for(;l.current.firstChild;)l.current.removeChild(l.current.firstChild)}(),function(e){for(var t=0;t<e.length;t++)l.current.appendChild(e[t])}(e)}),[x]),(0,r.useEffect)((function(){!function(e){Object.keys(e).filter((function(t){return e[t]})).forEach((function(e){var t=e.toLowerCase().split(" "),r=Array.from(document.querySelectorAll(".notion-collection-card")).find((function(e){return t.every((function(t){return e.id.includes(t)}))}));if(!r)return!1;r.querySelectorAll(".notion-collection-card__cover")[0].style.backgroundImage="linear-gradient(black, gray)";var n=r.querySelectorAll("img")[0];n.style.opacity=.25;var o,i=((o=document.createElement("span")).classList.add("exercise-card-overlay"),o.style.position="absolute",o.style.fontSize="20px",o.style.top="5px",o.style.right="5px",o.style.color="limegreen",o.style.zIndex=20,o.innerText="Completed ✓",o);n.parentNode.insertBefore(i,n)}))}(d)}),[d,x]),n().createElement("div",{className:"chapterPage"},n().createElement("div",{style:{display:"flex"}},n().createElement(c,{breadcrumbsContext:t})),n().createElement("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem"}},o),!x&&n().createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"stretch",maxHeight:"50px"}},n().createElement("div",{style:{flexGrow:1,maxWidth:"800px"}},n().createElement(u,{completedExercises:y,totalExercises:g})),n().createElement("div",{style:{marginLeft:"1rem",display:"flex",alignItems:"stretch"}},n().createElement("button",{type:"button",className:"rounded-md bg-indigo-50 px-2.5 py-1.5 text-sm font-semibold text-indigo-600 shadow-sm hover:bg-indigo-100",style:{height:"100%"},onClick:function(){E(!0),window.scrollTo(0,0)}},"Chapter Story"))),n().createElement("div",{ref:l}),x&&n().createElement("button",{type:"button",className:"rounded-md bg-indigo-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",onClick:function(){E(!1),window.scrollTo(0,0)}},"Go To Exercises"))},$t=s(35);function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Dt(){Dt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,s=Object.create(i.prototype),a=new k(o||[]);return n(s,"_invoke",{value:x(e,r,a)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h={};function d(){}function f(){}function p(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(O([])));m&&m!==t&&r.call(m,i)&&(y=m);var g=p.prototype=d.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,s,a){var c=u(e[n],e,i);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==Ut(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){o("next",e,s,a)}),(function(e){o("throw",e,s,a)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return o("throw",e,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=E(s,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(g),c(g,a,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function Ft(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}var Bt=function(){var e,t=(e=Dt().mark((function e(t,r,n,o){var i,s,a,c,l;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Headers({Authorization:"Bearer ".concat(ht),"Content-Type":"application/json"}),s={messages:t,model:"gpt-4",max_tokens:r,temperature:n,stream:o},e.prev=3,e.next=6,fetch("https://bjxmxsvjhzfnsjddquiz.functions.supabase.co/gpt",{method:"POST",headers:i,body:JSON.stringify(s)});case 6:return l=e.sent,e.next=9,l.json();case 9:a=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),c=e.t0;case 15:return e.abrupt("return",{data:a,error:c});case 16:case"end":return e.stop()}}),e,null,[[3,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){Ft(i,n,o,s,a,"next",e)}function a(e){Ft(i,n,o,s,a,"throw",e)}s(void 0)}))});return function(e,r,n,o){return t.apply(this,arguments)}}(),Gt=function(){return n().createElement("div",{role:"status"},n().createElement("svg",{"aria-hidden":"true",className:"w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-gray-200 fill-indigo-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),n().createElement("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})),n().createElement("span",{className:"sr-only"},"Loading..."))};function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function zt(){zt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,s=Object.create(i.prototype),a=new k(o||[]);return n(s,"_invoke",{value:x(e,r,a)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h={};function d(){}function f(){}function p(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(O([])));m&&m!==t&&r.call(m,i)&&(y=m);var g=p.prototype=d.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,s,a){var c=u(e[n],e,i);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==Mt(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){o("next",e,s,a)}),(function(e){o("throw",e,s,a)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return o("throw",e,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=E(s,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(g),c(g,a,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function qt(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function Jt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){qt(i,n,o,s,a,"next",e)}function a(e){qt(i,n,o,s,a,"throw",e)}s(void 0)}))}}function Ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Kt=function(e){var t=e.exerciseId,o=e.exerciseTitle,i=e.responseFields,s=e.setSummaryIsComplete,a=Ht((0,r.useState)(""),2),c=a[0],l=a[1],u=Ht((0,r.useState)(!0),2),h=u[0],d=u[1],f=function(){var e=Jt(zt().mark((function e(){var r,n,s,a,c,l,u,h,d,f,p;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],s="You are InnerCompassGPT. We give users exercises for them to discover insights to consider in choosing their life direction. You are here to summarize the user's responses to an exercise, and extract the user's most important points. In the context of the user's life and big life decisions, we want to find what matters most to the user, what gets in the user's way, and what is intriguing to the user. There won't necessarily be something to extract in each of these categories. We will provide the exercise name, and the responses the user provided in this exercise. Be direct and concise in your summarization, keeping it at most to two paragraphs of content. Return your summary / points in a bullet point format, with each bullet point being a sentence or two. Make the bullet points in the second person (speaking directly to the user). Keep the introduction of your summary points to a minimum (one sentence). The exercise title is \"".concat(o,'". The user will now provide responses.'),n.push({role:"system",content:s}),a="",c=null==i?void 0:i.map((function(e){return Et(t,e)})),e.next=7,Promise.all(c);case 7:return l=e.sent,u=1,l.forEach((function(e){a+="Response ".concat(u,": \n ").concat(e,"\n\n"),u+=1})),n.push({role:"user",content:a}),e.next=13,Bt(n,200,.5,!1);case 13:return h=e.sent,d=h.data,f=h.error,p=null==d||null===(r=d.choices)||void 0===r?void 0:r[0].message.content,e.abrupt("return",{data:p,error:f});case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Jt(zt().mark((function e(){var t,r,n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),s(!1),e.next=4,f();case 4:t=e.sent,r=t.data,n=t.error,r?l(r):n&&l("Error generating summary. ".concat(n)),d(!1),s(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){p()}),[i]),n().createElement("div",{className:"exerciseOverview"},h&&n().createElement("div",null,n().createElement(Gt,null)),!h&&n().createElement("textarea",{placeholder:"Enter your response here...",value:c,rows:4,name:"exerciseOverview",id:"exerciseOverview",className:"block w-full rounded-md border-0 text-gray-900 bg-gray-200 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:py-1.5 sm:text-sm sm:leading-6",style:{resize:"vertical"},readOnly:!0}))},Yt=function(e){var t=e.currentIndex,r=e.stepTitles;function o(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}return n().createElement("nav",{"aria-label":"Progress",className:"w-full"},n().createElement("ol",{role:"list",className:"flex items-center"},r.map((function(e,i){return n().createElement("li",{key:e,className:o(i!==r.length-1?"flex-grow":"","relative","-z-10")},t>i?n().createElement(n().Fragment,null,n().createElement("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true"},n().createElement("div",{className:"h-0.5 w-full bg-indigo-600",style:{transitionDelay:"0.2s",transition:"background-color 0.3s ease, border-color 0.3s ease"}})),n().createElement("div",{className:"relative flex h-8 w-8 items-center justify-center rounded-full bg-indigo-600 hover:bg-indigo-900",style:{transitionDelay:"0.2s",transition:"background-color 0.3s ease, border-color 0.3s ease"}},n().createElement(l,{className:"h-5 w-5 text-white","aria-hidden":"true"}),n().createElement("span",{className:"sr-only"},e))):t===i?n().createElement(n().Fragment,null,n().createElement("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true"},n().createElement("div",{className:"h-0.5 w-full bg-gray-200",style:{transitionDelay:"0.2s",transition:"background-color 0.3s ease, border-color 0.3s ease"}})),n().createElement("div",{className:"relative flex h-8 w-8 items-center justify-center rounded-full border-2 border-indigo-600 bg-white",style:{transitionDelay:"0.2s",transition:"background-color 0.3s ease, border-color 0.3s ease"},"aria-current":"step"},n().createElement("span",{className:"h-2.5 w-2.5 rounded-full bg-indigo-600","aria-hidden":"true"}),n().createElement("span",{className:"sr-only"},e))):n().createElement(n().Fragment,null,n().createElement("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true"},n().createElement("div",{className:"h-0.5 w-full bg-gray-200",style:{transitionDelay:"0.2s",transition:"background-color 0.3s ease, border-color 0.3s ease"}})),n().createElement("div",{className:"group relative flex h-8 w-8 items-center justify-center rounded-full border-2 border-gray-300 bg-white hover:border-gray-400",style:{transitionDelay:"0.2s",transition:"background-color 0.3s ease, border-color 0.3s ease"}},n().createElement("span",{className:"h-2.5 w-2.5 rounded-full bg-transparent group-hover:bg-gray-300","aria-hidden":"true"}),n().createElement("span",{className:"sr-only"},e))))}))))};function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function Zt(){Zt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,s=Object.create(i.prototype),a=new k(o||[]);return n(s,"_invoke",{value:x(e,r,a)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h={};function d(){}function f(){}function p(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(O([])));m&&m!==t&&r.call(m,i)&&(y=m);var g=p.prototype=d.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,s,a){var c=u(e[n],e,i);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==Vt(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){o("next",e,s,a)}),(function(e){o("throw",e,s,a)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return o("throw",e,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=E(s,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(g),c(g,a,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function Xt(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?er(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tr=function(e){var t=e.uuid,o=e.breadcrumbsContext,i=e.Title,s=e.listOfLists,a=e.stepTitles,l=e.responseFields,u=Qt((0,r.useState)(0),2),h=u[0],d=u[1],f=Qt((0,r.useState)(!1),2),p=f[0],y=f[1],v=(0,r.useRef)(document.createElement("div")),m=function(){d((function(e){return e-1})),window.scrollTo(0,0)},g=function(){d((function(e){return e+1})),window.scrollTo(0,0)},b=function(){var e,r=(e=Zt().mark((function e(){var r;return Zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot(t,!0);case 2:r=o.hrefs[o.hrefs.length-2],window.location.href=r;case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){Xt(i,n,o,s,a,"next",e)}function a(e){Xt(i,n,o,s,a,"throw",e)}s(void 0)}))});return function(){return r.apply(this,arguments)}}(),w=function(e){"textarea"!==document.activeElement.tagName.toLowerCase()&&("ArrowRight"===e.key&&h<s.length-1?g():"ArrowLeft"===e.key&&h>0&&m())},x=function(){!function(){for(;v.current.firstChild;)v.current.removeChild(v.current.firstChild)}(),s[h].forEach((function(e){var r=function(e){if("notion-table__wrapper"===e.className){var r=Array.from(e.querySelectorAll("span")).filter((function(e){return""===e.className}));if("Response Field"===r[0].innerText)return $r(t,r[1].innerText,!1);if("Read Only Response Field"===r[0].innerText)return $r(t,r[1].innerText,!0)}return e}(e);v.current.appendChild(r)}))};return(0,r.useEffect)((function(){return window.addEventListener("keydown",w),function(){window.removeEventListener("keydown",w)}}),[h]),(0,r.useEffect)((function(){x()}),[h]),n().createElement("div",{className:"slideshow"},n().createElement("div",{style:{display:"flex"}},n().createElement(c,{breadcrumbsContext:o})),n().createElement("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem"}},i),n().createElement("div",{style:{display:"flex",justifyContent:"center"}},n().createElement(Yt,{currentIndex:h,maxIndex:s.length-1,stepTitles:a})),h===s.length-1&&n().createElement("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginTop:"1rem"}},"Summary Of Your Responses"),h===s.length-1&&n().createElement(Kt,{exerciseId:t,exerciseTitle:i,responseFields:l,setSummaryIsComplete:y}),n().createElement("div",{ref:v}),n().createElement("br",null),n().createElement("span",{className:"inline-flex rounded-md shadow-sm"},h>0&&n().createElement("button",{type:"button",className:"relative inline-flex items-center rounded-l-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10",onClick:m},"Previous"),h<s.length-1&&n().createElement("button",{type:"button",className:"-ml-px inline-flex items-center rounded-r-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10",onClick:g},"Next"),h===s.length-1&&n().createElement("button",{type:"button",disabled:!p,className:"relative -ml-px inline-flex items-center rounded-r-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm enabled:hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-50",onClick:b},"Complete",n().createElement($t,{className:"-mr-0.5 h-5 w-5","aria-hidden":"true"}))))},rr=function(e){e.uuid;var t=e.breadcrumbsContext,o=e.elements,i=(0,r.useRef)(document.createElement("div"));return(0,r.useEffect)((function(){!function(){for(;i.current.firstChild;)i.current.removeChild(i.current.firstChild)}(),function(e){for(var t=0;t<e.length;t++)i.current.appendChild(e[t])}(o)}),[o]),n().createElement("div",{className:"chapterPage"},n().createElement("div",{style:{display:"flex"}},n().createElement(c,{breadcrumbsContext:t})),n().createElement("div",{ref:i}))},nr=["brandonbaraban@gmail.com","jeffreyli.wa@gmail.com","logan@resahealth.com","delorazli@gmail.com"];function or(e){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},or(e)}function ir(){ir=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,s=Object.create(i.prototype),a=new k(o||[]);return n(s,"_invoke",{value:x(e,r,a)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h={};function d(){}function f(){}function p(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(O([])));m&&m!==t&&r.call(m,i)&&(y=m);var g=p.prototype=d.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,s,a){var c=u(e[n],e,i);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==or(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){o("next",e,s,a)}),(function(e){o("throw",e,s,a)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return o("throw",e,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=E(s,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(g),c(g,a,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function sr(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function ar(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){sr(i,n,o,s,a,"next",e)}function a(e){sr(i,n,o,s,a,"throw",e)}s(void 0)}))}}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ur=function(){var e=cr((0,r.useState)(""),2),t=e[0],o=e[1],i=cr((0,r.useState)(!1),2),s=i[0],a=i[1],c=cr((0,r.useState)("We give users exercises for them to discover insights to consider in choosing their life direction. Their responses to one such exercise has been summarized to highlight the most important points. We will provide the name of the exercise and the user’s summarize response.\n\nYou are InnerCompassGPT. Your job is to analyze the summary of the user's response to identify any psychological and social drivers of behavior that are present. In other words, you will uncover the values and beliefs that currently influence the user’s behavior, regardless of how they feel about those drivers. There is no minimum or maximum number of drivers to uncover. However, make sure drivers are mutually exclusive and collectively exhaustive.\n\nThe drivers of behavior should be represented as a “Tenet” and “Reasoning” in the following JSON format:\n{\n\tTenet: …,\n\tReasoning: …,\n}\n\nHere is the definition of a Tenet: A Tenet is an internal psychological principle, belief, or value that significantly influences your behavior, decision-making, and emotions. This could include personal values, beliefs, priorities, fears, and self-limiting thoughts. It's an underlying principle that guides how you live your life, not a goal or outcome you want to achieve. Tenets are not influenced by external factors outside of your control, such as where you're born, your gender, your circumstances, or the money you currently have. \n\nWhen writing a Tenet, it's crucial to be explicit about how the Tenet should be embodied and by whom, state it as a full sentence, not just a single word, to capture its context and nuances, and ensure it reflects your authentic self, regardless of your awareness or acceptance of it. For example, instead of writing \"Risk Taking,” a more comprehensive Tenet would be: \"Taking calculated risks in my personal life makes me feel alive, opens up serendipitous possibilities, and helps me avoid living a constrained life.\"\n\nHere is the definition of Reasoning: Reasoning should illustrate what part of the user's response motivated the creation of this tenet, and the placement of this tenet in this specific bucket.\n\nNext, you must sort the drivers of behavior you've identified into three buckets:\n1. Things that matter to the user (and thus fulfill them): This bucket includes tenets that represent the user's core internal values, passions, or sources of psychological fulfillment. They could be activities, relationships, or principles that the user deeply cares about and actively seeks to incorporate in their life.\n2. Things that get in the user's way (and hinder their fulfillment): This bucket is for tenets that represent internal barriers, fears, or self-imposed limitations that prevent the user from achieving their goals or feeling fulfilled. These are not external challenges, but rather, internal obstacles such as self-doubt or fear of failure.\n3. Things that are intriguing to the user (and may turn out to be fulfilling if explored): This bucket holds tenets related to interests, curiosities, or potential paths that the user might find fulfilling if they decide to pursue them. They could be new hobbies, career paths, or personal changes that the user is interested in exploring.\nThe sorting of drivers into these buckets depends on the user's internal motivations, desires, and challenges, as reflected in their responses. There won't necessarily be something to extract in each of these categories, so it’s okay if you place no drivers into a bucket.\n\nOnly output your final breakdown of 0 to 5 drivers of behavior for each of the three buckets.\n\nThe exercise is called \"{exerciseTitle}\".\n\nThe summary of the user's response is:\n\n{exerciseResponses}\n"),2),l=c[0],u=c[1],h=cr((0,r.useState)(""),2),d=h[0],f=h[1];(0,r.useEffect)((function(){ar(ir().mark((function e(){var t,r,n,o;return ir().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.auth.getSession();case 2:if(e.t1=t=e.sent.data,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===t;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=null===(r=t.session)||void 0===r?void 0:r.user;case 11:o=e.t2,f(null!==(n=null==o?void 0:o.email)&&void 0!==n?n:"");case 13:case"end":return e.stop()}}),e)})))()}),[]);var p=function(){var e=ar(ir().mark((function e(){var t,r;return ir().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.auth.signInWithOAuth({options:{redirectTo:window.location.origin},provider:"google"});case 2:t=e.sent,(r=t.error)&&console.error("Login failed:",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=ar(ir().mark((function e(){var t;return ir().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o("Loading..."),(t=[]).push({role:"system",content:l}),Bt(t,1e3,.5,!1).then((function(e){var t,r=e.data,n=e.error;n?(console.error(n),o("Error: "+n)):o(null==r||null===(t=r.choices)||void 0===t?void 0:t[0].message.content)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=nr.includes(d),m="Loading..."===t;return n().createElement(n().Fragment,null,n().createElement("button",{className:"block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 m-4",type:"button",onClick:function(){a(!0)}},"Inner Compass"),s&&n().createElement("div",{className:"fixed bg-black bg-opacity-50 top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto h-full font-inter",onMouseDown:function(){a(!1)},tabIndex:-1},n().createElement("div",{className:"flex w-full h-full justify-center items-center"},n().createElement("div",{className:"relative w-full max-w-2xl max-h-full",onMouseDown:function(e){e.stopPropagation()}},n().createElement("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700"},n().createElement("div",{className:"flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"},n().createElement("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white"},"Your inner compass"),n().createElement("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:function(){a(!1)}},n().createElement("svg",{"aria-hidden":"true",className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})),n().createElement("span",{className:"sr-only"},"Close modal"))),n().createElement("div",{className:"p-6 space-y-6"},v?n().createElement(n().Fragment,null,n().createElement("p",{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400"},"You're an admin! 🎉"),t?n().createElement(n().Fragment,null,n().createElement("p",{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400"},"GPT response:"),n().createElement("div",{className:"flex"},m&&n().createElement("div",{role:"status",className:"px-2"},n().createElement("svg",{"aria-hidden":"true",className:"w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),n().createElement("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})),n().createElement("span",{className:"sr-only"},"Loading...")),n().createElement("p",{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400"},t))):n().createElement(n().Fragment,null,n().createElement("div",{className:"mb-6"},n().createElement("label",{htmlFor:"system-prompt-input",className:"block mb-2 font-medium text-gray-900 dark:text-white"},"GPT inner compass generation prompt",n().createElement("p",{className:"py-2 text-xs"},'Scroll to the bottom of the system prompt to edit the data being used to generate inner compass tenets. Make sure to edit where it says "',"{exerciseTitle}",'" and "',"{exerciseResponses}",'".')),n().createElement("textarea",{id:"system-prompt-input",rows:"12",className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Hey SubGPT, make me a sandwich...",value:l,onChange:function(e){u(e.target.value)}})))):n().createElement(n().Fragment,null,n().createElement("p",{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400"},"This feature is under development. 🚧"),!d&&n().createElement(n().Fragment,null,n().createElement("p",{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400"},"Have admin access? Please log in to see your inner compass."),n().createElement("button",{type:"submit",className:"rounded-md bg-yellow-50 px-2 py-1.5 text-sm font-medium text-yellow-800 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50",onClick:p},"Log in with Google")))),v&&n().createElement("div",{className:"flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"},n().createElement("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:t?function(){o("")}:y},t?"Clear response":"Submit to GPT")))))))};function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dr=function(e){var o,i,s=e.navElement,a=(o=(0,r.useState)(!1),i=2,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(o,i)||function(e,t){if(e){if("string"==typeof e)return hr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hr(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],l=a[1],u=(0,r.useRef)(s);return(0,r.useEffect)((function(){c||(function(){for(var e=0;e<s.attributes.length;e+=1)u.current.setAttributeNode(s.attributes[e].cloneNode(!0));var r,o=Array.from(s.children).map((function(e){return e.cloneNode(!0)}));o.length>=1&&u.current.replaceChildren(o[0],(r=document.createElement("div"),t().createRoot(r).render(n().createElement(ur,null)),r))}(),l(!0))}),[c]),n().createElement("nav",{ref:u})};function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var pr=function(e){e.uuid;var t,o,i=e.breadcrumbsContext,s=e.Title,a=e.overviewElements,l=e.chaptersElements,u=(0,r.useRef)(document.createElement("div")),h=(t=(0,r.useState)(!0),o=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(t,o)||function(e,t){if(e){if("string"==typeof e)return fr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fr(e,t):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=h[0],f=h[1];return(0,r.useEffect)((function(){var e;e=d?a:l,function(){for(;u.current.firstChild;)u.current.removeChild(u.current.firstChild)}(),function(e){for(var t=0;t<e.length;t++)u.current.appendChild(e[t])}(e)}),[d]),n().createElement("div",{className:"chapterPage"},n().createElement("div",{style:{display:"flex"}},n().createElement(c,{breadcrumbsContext:i})),n().createElement("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem"}},s),!d&&n().createElement("div",{style:{marginLeft:"1rem",display:"flex",alignItems:"stretch"}},n().createElement("button",{type:"button",className:"rounded-md bg-indigo-50 px-2.5 py-1.5 text-sm font-semibold text-indigo-600 shadow-sm hover:bg-indigo-100",style:{height:"100%"},onClick:function(){f(!0),window.scrollTo(0,0)}},"Phase Overview")),n().createElement("div",{ref:u}),d&&n().createElement("button",{type:"button",className:"rounded-md bg-indigo-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",onClick:function(){f(!1),window.scrollTo(0,0)}},"See Chapter Journey"))};function yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}var gr=function(e){var t=e.navigationObject,o=yr((0,r.useState)(!1),2),i=o[0],s=o[1],a=yr((0,r.useState)([]),2),c=a[0],l=a[1],u=function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.find((function(e){return e.current}));if(r&&n&&(s(!0),l(t)),n)return!0;var o=t.find((function(t){return e(t.children,!1)}));return r&&o&&(s(!1),l(o.children)),!!o||void 0};(0,r.useEffect)((function(){u(t,!0)}),[t]);var h,d=function e(t){return!!t.current||t.children.some((function(t){return e(t)}))},f=function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=r&&t.children.length>0&&d(t);return n().createElement("li",{key:t.name},n().createElement("a",{href:t.href,className:mr(t.current?"bg-gray-50 text-indigo-600":"text-gray-700 hover:text-indigo-600 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold")},o?"  ":"",t.name),i&&n().createElement("ul",{role:"list",className:"ml-4 space-y-1"},t.children.map((function(t){return e(t,r,!0)}))))};return n().createElement("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6"},n().createElement("div",{className:"flex h-16 shrink-0 items-center"},n().createElement("img",{className:"h-8 w-auto",src:"https://tailwindui.com/img/logos/mark.svg?color=indigo&shade=600",alt:"Your Company"})),n().createElement("nav",{className:"flex flex-1 flex-col"},n().createElement("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7"},n().createElement("li",null,n().createElement("ul",{role:"list",className:"-mx-2 space-y-1"},(h=!i,c.map((function(e){return f(e,h)}))))))))},br=function(){var e=new Date;return Math.floor(e.getTime())};function wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Er=function(e){var t=e.exerciseId,o=e.responseFieldId,i=e.readOnly,s=void 0!==i&&i,a=wr((0,r.useState)(""),2),c=a[0],l=a[1],u=wr((0,r.useState)(0),2),h=u[0],d=u[1],f=wr((0,r.useState)(br()),2),p=f[0],y=f[1],v=wr((0,r.useState)("Latest changes not yet saved"),2),m=v[0],g=v[1],b=(0,r.useRef)(c),w=(0,r.useRef)(h),x=(0,r.useRef)(p),E=function(){return w.current>x.current};return(0,r.useEffect)((function(){b.current=c,w.current=h,x.current=p}),[c,h,p]),(0,r.useEffect)((function(){E()?g("Latest changes not yet saved"):g("Last saved: just now")}),[h,p]),(0,r.useEffect)((function(){var e=function(){Et(t,o).then((function(e){l(e)}));var e=setInterval((function(){E()&&br()-w.current>=1e3&&function(e,t,r){return Tt.apply(this,arguments)}(t,o,b.current).then((function(){y(br())}))}),800);return function(){clearInterval(e)}}();return e}),[o]),n().createElement("div",{className:"TextEditor"},!s&&n().createElement("label",{htmlFor:"response",className:"block text-sm font-medium leading-6 text-gray-900"},"Your Response:"),n().createElement("div",{className:"mt-2"},n().createElement("textarea",{placeholder:"Enter your response here...",value:c,rows:4,name:"response",id:"response",className:"block w-full rounded-md border-0 text-gray-900 "+(s?"bg-gray-200 ":"")+"shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:py-1.5 sm:text-sm sm:leading-6",style:{resize:"vertical"},onInput:s?null:function(e){console.log("handling response change"),l(e.target.value),d(br()),e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"},readOnly:s})),!s&&n().createElement("div",null,m))},_r=s(781);function Sr(e){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(e)}function kr(){kr=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,s=Object.create(i.prototype),a=new k(o||[]);return n(s,"_invoke",{value:x(e,r,a)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h={};function d(){}function f(){}function p(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(O([])));m&&m!==t&&r.call(m,i)&&(y=m);var g=p.prototype=d.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,s,a){var c=u(e[n],e,i);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==Sr(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){o("next",e,s,a)}),(function(e){o("throw",e,s,a)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return o("throw",e,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=E(s,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(g),c(g,a,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function Or(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}var jr=function(e){var t=e.onLogin,r=function(){var e,r=(e=kr().mark((function e(r){var n,o,i;return kr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,dt.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});case 3:n=e.sent,o=n.error,i=n.data.user,o?console.error("Login failed:",o):t(i);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){Or(i,n,o,s,a,"next",e)}function a(e){Or(i,n,o,s,a,"throw",e)}s(void 0)}))});return function(e){return r.apply(this,arguments)}}();return n().createElement("div",{className:"rounded-md bg-yellow-50 p-4"},n().createElement("div",{className:"flex"},n().createElement("div",{className:"flex-shrink-0"},n().createElement(_r,{className:"h-5 w-5 text-yellow-400","aria-hidden":"true"})),n().createElement("div",{className:"ml-3"},n().createElement("h3",{className:"text-sm font-medium text-yellow-800"},"Attention needed"),n().createElement("div",{className:"mt-2 text-sm text-yellow-700"},n().createElement("p",null,"You are not currently signed in. Login now to complete this exercise.")),n().createElement("div",{className:"mt-4"},n().createElement("div",{className:"-mx-2 -my-1.5 flex"},n().createElement("button",{type:"submit",className:"rounded-md bg-yellow-50 px-2 py-1.5 text-sm font-medium text-yellow-800 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50",onClick:r},"Log In With Google"))))))};function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function Lr(){Lr=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,s=Object.create(i.prototype),a=new k(o||[]);return n(s,"_invoke",{value:x(e,r,a)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h={};function d(){}function f(){}function p(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(O([])));m&&m!==t&&r.call(m,i)&&(y=m);var g=p.prototype=d.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,s,a){var c=u(e[n],e,i);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==Tr(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){o("next",e,s,a)}),(function(e){o("throw",e,s,a)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return o("throw",e,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=E(s,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(g),c(g,a,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function Pr(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function Cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ar=function(e){var t,o,i=e.exerciseId,s=e.responseFieldId,a=e.readOnly,c=void 0!==a&&a,l=(t=(0,r.useState)(null),o=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(t,o)||function(e,t){if(e){if("string"==typeof e)return Cr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Cr(e,t):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],h=l[1];return(0,r.useEffect)((function(){function e(){var t;return t=Lr().mark((function e(){var t,r,n,o;return Lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.auth.getSession();case 2:return t=e.sent,r=t.data,n=null==r?void 0:r.session,h((null==n?void 0:n.user)||null),o=dt.auth.onAuthStateChange((function(e,t){h((null==t?void 0:t.user)||null)})),e.abrupt("return",(function(){o.unsubscribe()}));case 8:case"end":return e.stop()}}),e)})),e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(e){Pr(i,n,o,s,a,"next",e)}function a(e){Pr(i,n,o,s,a,"throw",e)}s(void 0)}))},e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),n().createElement("div",{className:"text-response-widget-container-".concat(s)},u?n().createElement(Er,{exerciseId:i,responseFieldId:s,readOnly:c}):n().createElement(jr,{onLogin:function(e){h(e)}}))},Nr=[{name:"Introduction",href:"/517094a44e4b46e19dce4a7d328f8c84",current:!1,children:[]},{name:"How To Guide",href:"/how-you-should-use-this-handbook",current:!1,children:[]},{name:"Part 1: Build your inner compass",href:"/part-1-build-your-inner-compass",current:!0,children:[{name:"Phase 1: Uncover what matters",href:"/phase-1-uncover-what-matters",current:!1,children:[{name:"Chapter 1: What do you think fulfills you?",href:"/chapter-1-what-do-you-think-fulfills-you",current:!1,children:[]},{name:"Chapter 2: What do you think gets in your way?",href:"/chapter-2-what-do-you-think-gets-in-your-way",current:!1,children:[]},{name:"Chapter 3: What do you think intrigues you?",href:"/chapter-3-what-do-you-think-intrigues-you",current:!1,children:[]}]},{name:"Phase 2: Examine your motives",href:"/phase-2-examine-your-motives",current:!1,children:[{name:"Chapter 4: How would achieving your goals really feel?",href:"/chapter-4-how-would-achieving-your-goals-really-feel",current:!1,children:[]},{name:"Chapter 5: How do your limiting beliefs really impact you?",href:"/chapter-5-how-do-your-limiting-beliefs-really-impact-you",current:!1,children:[]},{name:"Chapter 6: What really underlies your interests?",href:"/chapter-6-what-really-underlies-your-interests",current:!1,children:[]}]},{name:"Phase 3: Refine what matters",href:"/phase-3-refine-what-matters",current:!1,children:[{name:"Chapter 7: What truly fulfills you?",href:"/chapter-7-what-truly-fulfills-you",current:!1,children:[]},{name:"Chapter 8: What truly gets in your way?",href:"/chapter-8-what-truly-gets-in-your-way",current:!1,children:[]},{name:"Chapter 9: What truly intrigues you?",href:"/chapter-9-what-truly-intrigues-you",current:!1,children:[]}]}]}];function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rr(e){var t=document.createElement("div");return t.classList.add("notion-column","".concat(e,"-widget-container")),t.style.width="calc((100% - var(--column-spacing) * 2) * 0.666667)",t.style.marginInlineStart="var(--column-spacing)",t}function $r(e,r){var n,o,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(n=r,(o=document.createElement("div")).classList.add("text-response-widget-container-"+n),o);return t().createRoot(s).render(React.createElement(Ar,{exerciseId:e,responseFieldId:r,readOnly:i})),s}function Ur(e,t){Array.from(e.querySelectorAll("a")).forEach((function(e){"Home"===e.innerText?t.homehref=e.href:(t.names.push(e.innerText),t.hrefs.push(e.href))}))}function Dr(e){var t=[];return e.forEach((function(e){if(e.classList.contains("notion-text")){var r=e.querySelectorAll(".notion-text > .notion-text__content > .notion-semantic-string > span > .resource > a.notion-link.notion-page");if(0===r.length)return;var n=r[0].textContent.trim(),o=r[0].getAttribute("href"),i=window.location.href.includes(o)||!o.includes("-")&&"https://handbookv2.innercompasswork.com/"===window.location.href;t.push({name:n,href:o,current:i,children:[]})}else if(e.classList.contains("notion-toggle")){var s=e.querySelectorAll(".notion-toggle__summary > .notion-semantic-string > span > .resource > a.notion-link.notion-page");if(0===s.length)return;var a=s[0].textContent.trim(),c=s[0].getAttribute("href"),l=window.location.href.includes(c),u=Array.from(e.querySelectorAll(".notion-toggle__content")[0].children),h=u.length>0?Dr(u):[];t.push({name:a,href:c,current:l,children:h})}})),t}function Fr(){var e=document.querySelectorAll(".notion-toggle__summary"),t=Array.from(e).find((function(e){return Array.from(e.children).find((function(e){return"Sidebar Layout"===e.innerText}))})).nextSibling;return Dr(Array.from(t.children))}function Br(e){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(e)}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Br(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Br(o)?o:String(o)),n)}var o}var zr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentNode=t,this.listOfLists=[],this.stepTitles=["Overview"],this.responseFields=[],this.currentList=[],this.uuid="",this.title="",this.breadcrumbsContext={names:[],hrefs:[],homehref:""}}var r,n;return r=e,(n=[{key:"process",value:function(){var e,r,n,o,i,s,a,c,l,u=this;(l=this.parentNode.children,function(e){if(Array.isArray(e))return Gr(e)}(l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return Gr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gr(e,t):void 0}}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){return u.processElement(e)})),this.currentList.length>0&&this.listOfLists.push(this.currentList),this.listOfLists.push([]),e=this.parentNode,r=this.uuid,n=this.breadcrumbsContext,o=this.title,i=this.listOfLists,s=this.stepTitles,a=this.responseFields,c=Rr("exercise"),t().createRoot(c).render(React.createElement(tr,{uuid:r,breadcrumbsContext:n,Title:o,listOfLists:i,stepTitles:s,responseFields:a})),e.parentNode.replaceChild(c,e)}},{key:"processElement",value:function(e){if("notion-table__wrapper"===e.className){var t=Array.from(e.querySelectorAll("span")).filter((function(e){return""===e.className}));this.processSpan(t,e)}else this.currentList.push(e)}},{key:"processSpan",value:function(e,t){var r,n,o;switch(null===(r=e[0])||void 0===r?void 0:r.innerText){case"Exercise UUID":this.uuid=null===(n=e[1])||void 0===n?void 0:n.innerText;break;case"Exercise Title":this.title=null===(o=e[1])||void 0===o?void 0:o.innerText;break;case"Breadcrumbs":this.processBreadcrumbs(t);break;case"Response Field":this.processResponseField(t,e,!1);break;case"Read Only Response Field":this.processResponseField(t,e,!0);break;case"Step Separator":this.processStepSeparator(e);break;default:this.currentList.push(t)}}},{key:"processBreadcrumbs",value:function(e){Ur(e,this.breadcrumbsContext)}},{key:"processResponseField",value:function(e,t,r){var n,o=null===(n=t[1])||void 0===n?void 0:n.innerText;r||this.responseFields.push(o),this.currentList.push(e)}},{key:"processStepSeparator",value:function(e){var t;this.listOfLists.push(this.currentList),this.stepTitles.push(null===(t=e[1])||void 0===t?void 0:t.innerText),this.currentList=[]}}])&&Mr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function Jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==qr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==qr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===qr(o)?o:String(o)),n)}var o}var Wr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentNode=t,this.uuid="",this.breadcrumbsContext={names:[],hrefs:[],homehref:""},this.title="",this.exerciseEntries={},this.storyElements=[],this.exercisesElements=[],this.inStory=!0}var r,n;return r=e,(n=[{key:"process",value:function(){var e,r,n,o,i,s,a,c,l,u=this;(l=this.parentNode.children,function(e){if(Array.isArray(e))return Jr(e)}(l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return Jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jr(e,t):void 0}}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){return u.processElement(e)})),e=this.parentNode,r=this.uuid,n=this.breadcrumbsContext,o=this.title,i=this.exerciseEntries,s=this.storyElements,a=this.exercisesElements,c=Rr("chapter"),t().createRoot(c).render(React.createElement(Rt,{uuid:r,breadcrumbsContext:n,Title:o,exerciseEntries:i,storyElements:s,exercisesElements:a})),e.parentNode.replaceChild(c,e)}},{key:"processElement",value:function(e){if("notion-table__wrapper"===e.className){var t=Array.from(e.querySelectorAll("span")).filter((function(e){return""===e.className}));this.processSpan(t,e)}else this.inStory?this.storyElements.push(e):this.exercisesElements.push(e)}},{key:"processSpan",value:function(e,t){var r,n,o,i,s;switch(null===(r=e[0])||void 0===r?void 0:r.innerText){case"Chapter UUID":this.uuid=null===(n=e[1])||void 0===n?void 0:n.innerText;break;case"Chapter Title":this.title=null===(o=e[1])||void 0===o?void 0:o.innerText;break;case"Exercise":this.exerciseEntries[null===(i=e[1])||void 0===i?void 0:i.innerText]=null===(s=e[2])||void 0===s?void 0:s.innerText;break;case"Breadcrumbs":this.processBreadcrumbs(t);break;case"Chapter Page Separator":this.inStory=!1;break;default:this.inStory?this.storyElements.push(t):this.exercisesElements.push(t)}}},{key:"processBreadcrumbs",value:function(e){Ur(e,this.breadcrumbsContext)}}])&&Hr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Kr(e){return Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kr(e)}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Kr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Kr(o)?o:String(o)),n)}var o}var Zr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentNode=t,this.uuid="",this.elements=[],this.breadcrumbsContext={names:[],hrefs:[],homehref:""}}var r,n;return r=e,(n=[{key:"process",value:function(){var e,r,n,o,i,s,a=this;(s=this.parentNode.children,function(e){if(Array.isArray(e))return Yr(e)}(s)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return Yr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yr(e,t):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){return a.processElement(e)})),e=this.parentNode,r=this.uuid,n=this.breadcrumbsContext,o=this.elements,i=Rr("generic"),t().createRoot(i).render(React.createElement(rr,{uuid:r,breadcrumbsContext:n,elements:o})),e.parentNode.replaceChild(i,e)}},{key:"processElement",value:function(e){if("notion-table__wrapper"===e.className){var t,r,n=Array.from(e.querySelectorAll("span")).filter((function(e){return""===e.className}));"Breadcrumbs"===(null===(t=n[0])||void 0===t?void 0:t.innerText)?this.processBreadcrumbs(e):null!==(r=n[0])&&void 0!==r&&r.innerText.includes("UUID")||this.elements.push(e)}else this.elements.push(e)}},{key:"processBreadcrumbs",value:function(e){Ur(e,this.breadcrumbsContext)}}])&&Vr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Xr(e){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xr(e)}function Qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function en(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Xr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Xr(o)?o:String(o)),n)}var o}var tn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentNode=t,this.uuid="",this.breadcrumbsContext={names:[],hrefs:[],homehref:""},this.title="",this.overviewElements=[],this.chaptersElements=[],this.onOverview=!0}var r,n;return r=e,(n=[{key:"process",value:function(){var e,r,n,o,i,s,a,c,l=this;(c=this.parentNode.children,function(e){if(Array.isArray(e))return Qr(e)}(c)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||function(e,t){if(e){if("string"==typeof e)return Qr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qr(e,t):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){return l.processElement(e)})),e=this.parentNode,r=this.uuid,n=this.breadcrumbsContext,o=this.title,i=this.overviewElements,s=this.chaptersElements,a=Rr("phase"),t().createRoot(a).render(React.createElement(pr,{uuid:r,breadcrumbsContext:n,Title:o,overviewElements:i,chaptersElements:s})),e.parentNode.replaceChild(a,e)}},{key:"processElement",value:function(e){if("notion-table__wrapper"===e.className){var t=Array.from(e.querySelectorAll("span")).filter((function(e){return""===e.className}));this.processSpan(t,e)}else this.onOverview?this.overviewElements.push(e):this.chaptersElements.push(e)}},{key:"processSpan",value:function(e,t){var r,n,o;switch(null===(r=e[0])||void 0===r?void 0:r.innerText){case"Phase UUID":this.uuid=null===(n=e[1])||void 0===n?void 0:n.innerText;break;case"Phase Title":this.title=null===(o=e[1])||void 0===o?void 0:o.innerText;break;case"Breadcrumbs":this.processBreadcrumbs(t);break;case"Phase Page Separator":this.onOverview=!1;break;default:this.onOverview?this.overviewElements.push(t):this.chaptersElements.push(t)}}},{key:"processBreadcrumbs",value:function(e){Ur(e,this.breadcrumbsContext)}}])&&en(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function rn(){var e,r,n,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=(e=document.querySelectorAll(".notion-table__wrapper"),r="",{middleColumn:null==(n=Array.from(e).find((function(e){var t,n,o=Array.from(e.querySelectorAll("span")).filter((function(e){return""===e.className}));if(["Exercise UUID","Chapter UUID","Phase UUID","Part UUID","Other Page UUID"].includes(null===(t=o[0])||void 0===t?void 0:t.innerText))return r=null===(n=o[0])||void 0===n?void 0:n.innerText.split(" ")[0],!0})))?void 0:n.parentElement,pageType:r}),s=i.middleColumn,a=i.pageType;return!!s&&(function(){var e,r,n=document.querySelectorAll(".super-navbar")[0],o=null==n?void 0:n.children[0];if("NAV"===(null==o?void 0:o.tagName)){var i=document.createElement("div");(e=i.classList).add.apply(e,function(e){if(Array.isArray(e))return Ir(e)}(r=Array.from(n.classList))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return Ir(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ir(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i.style.position="sticky",t().createRoot(i).render(React.createElement(dr,{navElement:o})),n.replaceWith(i)}}(),function(e){var r,n,o;r=document.querySelectorAll(".notion-column")[0],n=e?Nr:Fr(),o=document.createElement("div"),t().createRoot(o).render(React.createElement(gr,{navigationObject:n})),r.appendChild(o),console.log("got here, adding to sidebar")}(o),function(e,t){switch(t){case"Exercise":new zr(e).process();break;case"Chapter":new Wr(e).process();break;case"Phase":new tn(e).process();break;default:new Zr(e).process()}}(s,a),!0)}}(),a}()}));